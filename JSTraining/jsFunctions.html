<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>

<body style="font-size: 12px">
<p>
    Все переменные внутри функции – это свойства специального внутреннего объекта LexicalEnvironment, который создаётся
    при её запуске.
</p>
<p>
    При запуске функция создает объект LexicalEnvironment, записывает туда аргументы, функции и переменные. Процесс
    инициализации выполняется в том же порядке, что и для глобального объекта, который, вообще говоря, является частным
    случаем лексического окружения.
</p>
<p>
    В отличие от window, объект LexicalEnvironment является внутренним, он скрыт от прямого доступа.

</p>
<p>
    Замыкание – это функция вместе со всеми внешними переменными, которые ей доступны.
</p>
<p>
    Понимать замыкания» в JavaScript означает понимать следующие вещи:
</p>
<ul>
    <li>
        Все переменные и параметры функций являются свойствами объекта переменных LexicalEnvironment. Каждый запуск
        функции
        создает новый такой объект. На верхнем уровне им является «глобальный объект», в браузере – window.
    <li>
        При создании функция получает системное свойство [[Scope]], которое ссылается на LexicalEnvironment, в котором
        она
        была
        создана.
    </li>
    <li>
        При вызове функции, куда бы её ни передали в коде – она будет искать переменные сначала у себя, а затем во
        внешних
        LexicalEnvironment с места своего «рождения».
    </li>
</ul>


<script>

    //    -----------------------------------------------------------------------------------------------------------------
    /*say('Вася'); // Что выведет? Не будет ли ошибки?
     var phrase = 'Привет';
     function say(name) {
     alert(name + ", " + phrase);
     }*/

    //    -----------------------------------------------------------------------------------------------------------------
    /*var value = 0;
     function f() {
     if (1) {
     value = true;
     } else {
     var value = false;// повторное обьявление var value сбрасывает её в undefined
     }
     alert( value );
     }
     f();*/

    //    -----------------------------------------------------------------------------------------------------------------
    /*var a = 5;
     (function() {
     alert(a)
     })()*/

    //    -----------------------------------------------------------------------------------------------------------------
    /*function makeCounter() {
     var currentCount = 1;

     return function() {
     var currentCount;
     // можно ли здесь вывести currentCount из внешней функции (равный 1)?
     };
     }*/
    //    Нет, нельзя.Локальная переменная полностью перекрывает внешнюю.

    //    -----------------------------------------------------------------------------------------------------------------
    var a = 1;

    function getFunc() {
        var a = 2;

        var func = new Function('', 'alert(a)');

        return func;
    }

    getFunc()(); // 1, из window
    //    ----------------
    var b = 1;

    function getFuncB() {
        var b = 2;

        var funcB = function() { alert(b); };

        return funcB;
    }

    getFuncB()(); // 2, из LexicalEnvironment функции getFunc
    //    -----------------------------------------------------------------------------------------------------------------
    //    -----------------------------------------------------------------------------------------------------------------
    //    -----------------------------------------------------------------------------------------------------------------
</script>
</body>
</html>